<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Climbing Stairs Storyboard</title>
  <style>
    :root {
      font-family: "Inter", "Segoe UI", Arial, sans-serif;
      color-scheme: light dark;
      --bg: #050816;
      --panel: rgba(13, 25, 56, 0.68);
      --card: rgba(21, 38, 79, 0.85);
      --accent: #5ef2c7;
      --accent-soft: rgba(94, 242, 199, 0.2);
      --text: #f2f6ff;
      --muted: rgba(242, 246, 255, 0.74);
      --code-bg: rgba(6, 16, 42, 0.92);
      --step: rgba(104, 175, 255, 0.35);
      --step-active: #5ef2c7;
      --walker: #ffe073;
      background: var(--bg);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, rgba(49, 117, 204, 0.25), transparent 60%),
                  radial-gradient(circle at bottom, rgba(94, 242, 199, 0.18), transparent 65%),
                  var(--bg);
      color: var(--text);
      padding: clamp(1rem, 3vw, 2.6rem);
    }

    .frame {
      width: min(58rem, 92vw);
      aspect-ratio: 9 / 16;
      background: linear-gradient(185deg, rgba(3, 11, 30, 0.95), rgba(5, 14, 34, 0.98));
      border-radius: 28px;
      border: 1px solid rgba(94, 242, 199, 0.22);
      padding: clamp(1.5rem, 2.8vw, 2.6rem);
      display: flex;
      flex-direction: column;
      gap: clamp(1rem, 2vw, 1.6rem);
      box-shadow: 0 30px 70px rgba(0, 0, 0, 0.45);
      overflow: hidden;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    header h1 {
      margin: 0;
      font-size: clamp(1.6rem, 3.4vw, 2.4rem);
      letter-spacing: 0.05em;
    }

    header p {
      margin: 0;
      font-size: clamp(0.92rem, 1.8vw, 1.05rem);
      color: var(--muted);
    }

    .content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: clamp(1rem, 2vw, 1.8rem);
    }

    .top-section,
    .middle-section,
    .bottom-section {
      border-radius: 22px;
      padding: clamp(1rem, 2.2vw, 1.8rem);
      background: var(--panel);
      border: 1px solid rgba(255, 255, 255, 0.05);
      display: flex;
      flex-direction: column;
      gap: clamp(0.8rem, 1.8vw, 1.4rem);
      min-height: 0;
    }

    .top-section {
      flex: 0 0 34%;
    }

    .middle-section {
      flex: 0 0 32%;
      position: relative;
      overflow: hidden;
      padding-bottom: clamp(1rem, 2vw, 1.8rem);
    }

    .bottom-section {
      flex: 0 0 27%;
      background: var(--code-bg);
    }

    .top-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: clamp(0.8rem, 1.5vw, 1.4rem);
      flex: 1;
      min-height: 0;
    }

    .card {
      background: var(--card);
      border-radius: 18px;
      padding: clamp(0.9rem, 1.8vw, 1.2rem);
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      border: 1px solid rgba(255, 255, 255, 0.06);
      min-height: 0;
    }

    .card h2,
    .middle-section h2,
    .bottom-section h2 {
      margin: 0;
      font-size: clamp(1rem, 2vw, 1.2rem);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .input-controls {
      display: flex;
      align-items: center;
      gap: 0.9rem;
      flex-wrap: wrap;
      color: var(--muted);
      font-size: clamp(0.9rem, 1.8vw, 1rem);
    }

    .input-controls input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 180px;
      max-width: 100%;
      height: 6px;
      border-radius: 4px;
      background: rgba(255, 255, 255, 0.18);
    }

    .input-controls input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    .input-controls input[type="range"]::-moz-range-thumb {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      border: none;
    }

    .input-controls button {
      background: linear-gradient(120deg, var(--accent), rgba(94, 242, 199, 0.4));
      color: #03122c;
      border: none;
      border-radius: 999px;
      padding: 0.45rem 1.3rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .input-controls button:hover {
      transform: translateY(-1px);
    }

    .narration {
      font-size: clamp(0.9rem, 1.7vw, 1.05rem);
      line-height: 1.6;
      color: var(--muted);
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .narration p {
      margin: 0;
    }

    .narration .state-label {
      font-weight: 600;
      color: var(--accent);
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: clamp(0.78rem, 1.4vw, 0.9rem);
    }

    .stairs-stage {
      flex: 1;
      position: relative;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 0.55rem;
      padding: 0 0.45rem;
    }

    .step {
      flex: 1 1 0;
      min-width: 32px;
      background: var(--step);
      border-radius: 12px 12px 4px 4px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      position: relative;
      transition: transform 0.4s ease, background 0.4s ease, border-color 0.4s ease;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding-bottom: 0.4rem;
      z-index: 1;
    }

    .step.active {
      background: rgba(94, 242, 199, 0.8);
      border-color: rgba(94, 242, 199, 0.9);
      transform: translateY(-6px);
    }

    .step-label {
      position: absolute;
      top: 0.35rem;
      left: 0.5rem;
      font-size: 0.75rem;
      letter-spacing: 0.08em;
      color: rgba(3, 14, 35, 0.7);
      font-weight: 600;
      text-transform: uppercase;
    }

    .dp-value {
      font-size: clamp(0.85rem, 1.6vw, 1rem);
      font-weight: 600;
      color: #031431;
      background: rgba(255, 255, 255, 0.65);
      border-radius: 999px;
      padding: 0.18rem 0.7rem;
    }

    .walker {
      position: absolute;
      width: clamp(42px, 7vw, 50px);
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      background: var(--walker);
      border: 3px solid rgba(3, 19, 46, 0.7);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
      display: grid;
      place-items: center;
      font-weight: 700;
      color: #052047;
      letter-spacing: 0.08em;
      transform: translate(-50%, -50%);
      transition: transform 0.7s ease-in-out;
      z-index: 3;
    }

    .walker::after {
      content: "YOU";
      font-size: clamp(0.65rem, 1.4vw, 0.78rem);
    }

    .trail {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 2;
    }

    .trail span {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(94, 242, 199, 0.35);
      transform: translate(-50%, -50%);
      opacity: 0;
      animation: trailFade 1.2s ease forwards;
    }

    @keyframes trailFade {
      from { opacity: 0.8; }
      to { opacity: 0; }
    }

    pre {
      margin: 0;
      font-family: "JetBrains Mono", "Fira Code", "Source Code Pro", monospace;
      font-size: clamp(0.78rem, 1.6vw, 0.95rem);
      line-height: 1.6;
      background: rgba(3, 12, 32, 0.72);
      border-radius: 16px;
      padding: clamp(0.9rem, 1.8vw, 1.4rem);
      overflow: hidden;
      position: relative;
      color: rgba(222, 235, 255, 0.9);
    }

    .code-line {
      display: block;
      padding-left: 1.2rem;
      position: relative;
      transition: background 0.3s ease;
    }

    .code-line[data-indent="1"] { padding-left: 2.4rem; }
    .code-line[data-indent="2"] { padding-left: 3.6rem; }
    .code-line[data-indent="3"] { padding-left: 4.8rem; }

    .code-line.highlight {
      background: rgba(94, 242, 199, 0.14);
    }

    .code-line::before {
      content: attr(data-line);
      position: absolute;
      left: 0;
      color: rgba(94, 242, 199, 0.6);
      font-size: 0.68rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .footer-note {
      font-size: clamp(0.7rem, 1.4vw, 0.85rem);
      color: rgba(255, 255, 255, 0.55);
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    @media (max-width: 540px) {
      .top-grid {
        grid-template-columns: 1fr;
      }
      .top-section { flex: 0 0 auto; }
      .middle-section { flex: 0 0 auto; min-height: 260px; }
      .bottom-section { flex: 0 0 auto; }
    }
  </style>
</head>
<body>
  <div class="frame" role="application" aria-label="Climbing stairs dynamic programming storyboard">
    <header>
      <h1>LeetCode Visualization &mdash; Climbing Stairs</h1>
      <p>An at-a-glance analysis of the repository's visual style paired with a friendly dynamic programming walkthrough of LeetCode 70.</p>
    </header>
    <div class="content">
      <section class="top-section" aria-labelledby="inputs-heading narration-heading">
        <div class="top-grid">
          <article class="card" aria-live="polite">
            <h2 id="inputs-heading">Inputs</h2>
            <div class="input-controls">
              <label for="steps-range">Target steps (n): <strong id="steps-label">5</strong></label>
              <input id="steps-range" type="range" min="2" max="9" value="5" aria-valuemin="2" aria-valuemax="9" aria-valuenow="5" aria-label="Number of stairs" />
              <button id="replay">Replay Story</button>
            </div>
            <p class="footer-note">Slide to choose the staircase height, then replay to watch the dynamic programming logic update.</p>
          </article>
          <article class="card narration">
            <h2 id="narration-heading">Narration Board</h2>
            <span class="state-label" id="state-label">Repository Snapshot</span>
            <p id="narration-text">LeetCodeVisualization hosts dozens of focused HTML explainers, each wired to a shared animation library. This storyboard borrows that modular layout to spotlight how one page can hold narration, inputs, visuals, and code without overlap.</p>
          </article>
        </div>
      </section>

      <section class="middle-section" aria-labelledby="animation-heading">
        <h2 id="animation-heading">Animated Walkthrough</h2>
        <div class="stairs-stage" id="stairs-stage">
          <div class="walker" id="walker" aria-hidden="true"></div>
          <div class="trail" id="trail" aria-hidden="true"></div>
        </div>
      </section>

      <section class="bottom-section" aria-labelledby="code-heading">
        <h2 id="code-heading">Java Left-Indented Solution</h2>
        <pre aria-live="polite">
<span class="code-line" data-line="01" data-indent="0">class Solution {</span>
<span class="code-line" data-line="02" data-indent="1">public int climbStairs(int n) {</span>
<span class="code-line" data-line="03" data-indent="2">if (n &lt;= 2) {</span>
<span class="code-line" data-line="04" data-indent="3">return n;</span>
<span class="code-line" data-line="05" data-indent="2">}</span>
<span class="code-line" data-line="06" data-indent="2">int oneStepBack = 2;</span>
<span class="code-line" data-line="07" data-indent="2">int twoStepsBack = 1;</span>
<span class="code-line" data-line="08" data-indent="2">for (int step = 3; step &lt;= n; step++) {</span>
<span class="code-line" data-line="09" data-indent="3">int current = oneStepBack + twoStepsBack;</span>
<span class="code-line" data-line="10" data-indent="3">twoStepsBack = oneStepBack;</span>
<span class="code-line" data-line="11" data-indent="3">oneStepBack = current;</span>
<span class="code-line" data-line="12" data-indent="2">}</span>
<span class="code-line" data-line="13" data-indent="2">return oneStepBack;</span>
<span class="code-line" data-line="14" data-indent="1">}</span>
<span class="code-line" data-line="15" data-indent="0">}</span>
        </pre>
      </section>
    </div>
  </div>

  <script>
    const stairsStage = document.getElementById('stairs-stage');
    const walker = document.getElementById('walker');
    const trail = document.getElementById('trail');
    const stepsRange = document.getElementById('steps-range');
    const stepsLabel = document.getElementById('steps-label');
    const replayButton = document.getElementById('replay');
    const narrationText = document.getElementById('narration-text');
    const stateLabel = document.getElementById('state-label');
    const codeLines = document.querySelectorAll('.code-line');

    let currentTimeouts = [];
    let stepElements = [];

    function clearTimeline() {
      currentTimeouts.forEach(clearTimeout);
      currentTimeouts = [];
      stepElements.forEach(step => step.remove());
      stepElements = [];
      trail.innerHTML = '';
    }

    function createStairs(n) {
      clearTimeline();
      const maxHeight = stairsStage.clientHeight * 0.78;
      for (let i = 0; i <= n; i++) {
        const step = document.createElement('div');
        step.className = 'step';
        step.style.height = `${Math.max(48, (i / n) * maxHeight)}px`;
        step.dataset.index = i;

        const label = document.createElement('span');
        label.className = 'step-label';
        label.textContent = `Step ${i}`;
        step.appendChild(label);

        const value = document.createElement('span');
        value.className = 'dp-value';
        value.textContent = '...';
        step.appendChild(value);

        stairsStage.appendChild(step);
        stepElements.push(step);
      }
      moveWalkerTo(stepElements[0]);
    }

    function moveWalkerTo(stepElement) {
      if (!stepElement) return;
      const stageRect = stairsStage.getBoundingClientRect();
      const rect = stepElement.getBoundingClientRect();
      const x = rect.left + rect.width / 2 - stageRect.left;
      const y = rect.top - stageRect.top;
      walker.style.transform = `translate(${x}px, ${y}px)`;
      spawnTrail(x, y);
    }

    function spawnTrail(x, y) {
      const dot = document.createElement('span');
      dot.style.left = `${x}px`;
      dot.style.top = `${y}px`;
      trail.appendChild(dot);
      setTimeout(() => dot.remove(), 1100);
    }

    function highlightCode(lines) {
      codeLines.forEach(line => {
        if (lines.includes(parseInt(line.dataset.line, 10))) {
          line.classList.add('highlight');
        } else {
          line.classList.remove('highlight');
        }
      });
    }

    function buildNarration(state) {
      stateLabel.textContent = state.label;
      narrationText.textContent = state.text;
    }

    function animate(n) {
      const dp = new Array(n + 1).fill(0);
      const timeline = [];

      dp[0] = 1;
      timeline.push({
        step: 0,
        dpValue: dp[0],
        label: 'Base Case',
        text: 'Standing on the floor counts as one way. Doing nothing is still a valid plan.',
        codeLines: [2, 3, 4]
      });

      if (n >= 1) {
        dp[1] = 1;
        timeline.push({
          step: 1,
          dpValue: dp[1],
          label: 'Single Step',
          text: 'With one stair you only have the simple hop. That makes exactly one route.',
          codeLines: [2, 3, 4]
        });
      }

      for (let i = 2; i <= n; i++) {
        dp[i] = dp[i - 1] + dp[i - 2];
        timeline.push({
          step: i,
          dpValue: dp[i],
          label: 'Dynamic Move',
          text: `To land on step ${i}, you arrive from step ${i - 1} or step ${i - 2}. Add their counts: ${dp[i - 1]} + ${dp[i - 2]} = ${dp[i]}.`,
          codeLines: [8, 9, 10, 11]
        });
      }

      timeline.push({
        step: n,
        dpValue: dp[n],
        label: 'Answer',
        text: `All paths tallied! There are ${dp[n]} different ways to reach the top when the staircase has ${n} steps.`,
        codeLines: [13]
      });

      timeline.forEach((state, index) => {
        const timeout = setTimeout(() => {
          stepElements.forEach(step => step.classList.remove('active'));
          const stepElement = stepElements[state.step];
          if (stepElement) {
            stepElement.classList.add('active');
            const value = stepElement.querySelector('.dp-value');
            value.textContent = state.dpValue;
            moveWalkerTo(stepElement);
          }
          buildNarration(state);
          highlightCode(state.codeLines);
        }, index * 1800);
        currentTimeouts.push(timeout);
      });
    }

    function boot() {
      const n = parseInt(stepsRange.value, 10);
      stepsLabel.textContent = n;
      stepsRange.setAttribute('aria-valuenow', n);
      createStairs(n);
      animate(n);
    }

    stepsRange.addEventListener('input', () => {
      boot();
    });

    replayButton.addEventListener('click', () => {
      boot();
    });

    window.addEventListener('resize', () => {
      const n = parseInt(stepsRange.value, 10);
      createStairs(n);
      animate(n);
    });

    boot();
  </script>
</body>
</html>
